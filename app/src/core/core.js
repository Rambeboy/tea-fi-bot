const _0x36c535=_0x387f;(function(_0x30f738,_0x20cc04){const _0x35c2a8=_0x387f,_0x1c9271=_0x30f738();while(!![]){try{const _0x344726=-parseInt(_0x35c2a8(0x19f))/0x1+-parseInt(_0x35c2a8(0x1c3))/0x2+-parseInt(_0x35c2a8(0x169))/0x3+-parseInt(_0x35c2a8(0x1af))/0x4*(parseInt(_0x35c2a8(0x1b1))/0x5)+-parseInt(_0x35c2a8(0x168))/0x6*(parseInt(_0x35c2a8(0x1d8))/0x7)+parseInt(_0x35c2a8(0x1cd))/0x8+parseInt(_0x35c2a8(0x16f))/0x9;if(_0x344726===_0x20cc04)break;else _0x1c9271['push'](_0x1c9271['shift']());}catch(_0x5048e3){_0x1c9271['push'](_0x1c9271['shift']());}}}(_0x243e,0x3ce53));import{ethers}from'ethers';import{privateKey}from'../../accounts/accounts.js';import{Helper}from'../utils/helper.js';function _0x387f(_0x30b25f,_0x1dffd4){const _0x243e57=_0x243e();return _0x387f=function(_0x387f33,_0x395a3e){_0x387f33=_0x387f33-0x152;let _0x3a949e=_0x243e57[_0x387f33];return _0x3a949e;},_0x387f(_0x30b25f,_0x1dffd4);}import _0x29bf5f from'../utils/logger.js';import{RPC}from'./network/rpc.js';import{API}from'./api/api.js';import{TOKENLIST}from'./abi/erc20_token_list.js';import _0x20ea4c from'./db/sqlite.js';import{Config}from'../../config/config.js';import'ethers';function _0x243e(){const _0x122bcf=['claimDailySugar','Error\x20in\x20executing\x20transaction:\x20','28kIAgln','\x20token\x20to\x20Unwrap','TX\x20DATA\x20','No\x20','Daily\x20Sugar\x20Claimed,\x20Got\x20','Account\x20Type\x20:\x20','Balance\x20updated','Executing\x20TX...','...\x20Attempt\x20','Getting\x20Wallet\x20Balance\x20of\x20','hash','trim','\x20spend\x20by\x20','permitToken','refers','Submitting\x20Transaction\x20to\x20Tea-Fi...','nonce','contract','wait','token','WPOL','determineType','tx/','sugar','now','Wrap\x20','transaction','EXPLORER','Transaction\x20confirmation\x20timed\x20out\x20after\x205\x20minutes.','getAddress','serializeBigInt','Checking\x20Token\x20Permit','populateTransaction','TXAMOUNT','data','Successfully\x20Unwrap\x20','unwrap','Tx\x20Executed\x20\x0a','info','693270PiWrpi','1356021GutxEM','RAWDATA','uint256','Claiming\x20Daily\x20Sugar...','ABI','https://api.tea-fi.com/transaction','11140083YdkgFv','provider','sendTransaction','\x20to\x20','WRAPPING','POST','balanceOf','Approval\x20Found','getBalance','uint160','Tx\x20Executed...','SYMBOL','approveTokenCheck','executeTx','Token\x20','Tx\x20Confirmed\x20and\x20Finalizing:\x20','No\x20token\x20to\x20Unwrap','pointsAmount','details','\x20-\x20','points','gasUsed','indexOf','Estimating\x20Gas\x20for\x20','nonceBitmap','PERMIT2','waitWithTimeout','TPOL','Re-executing\x20transaction\x20due\x20to\x20timeout.','fetch','Wallet','insertData','from','buildTxBody','permit','estimateGas','symbol','https://api.tea-fi.com/points/','504','\x20token\x20to\x20Wrap','WAITFORBLOCKCONFIRMATION','wrap','allowance','message','latest','wallet','PermitDetails','Token\x20Permitted','124081FrnAmY','Secret\x20Phrase','Contract','uint48','Tx\x20Executed\x20and\x20Confirmed\x20\x0a','connectWallet','Wallet\x20connected\x20','Unwrap\x20','0xf033048cb2764f596bc4d98e089fa38bb84b4be3d5da2e77f9bfac0e4d6c68ca','status','deposit','https://api.tea-fi.com/wallet/check-in?address=','Try\x20to\x20Approving\x20','includes','\x20attempts.','balance','8XOPSxs','Token\x20already\x20permitted','14455Gqdrrx','GET','parseEther','\x20to\x20W','Connected\x20To\x20Tea-Fi','INITIALDEPOSITAMOUNT','address','stringify','\x20to\x20t','formatEther','Connecting\x20To\x20Tea-FI...','getSugar','\x20Sugar','toISOString','Successfully\x20Wrap\x20','Invalid\x20account\x20Secret\x20Phrase\x20or\x20Private\x20Key','Try\x20To\x20Wrap\x20W','yourself!','52360smJapU','getOptimalNonce','\x20TX','reason','Failed\x20to\x20estimate\x20gas\x20after\x20','https://api.tea-fi.com/referrals','sigDeadline','RAWTX','Permit\x20Token\x20Spend','acc','654960smcxYr','MaxUint256','Private\x20Key','CHAINID','expiration','warn','withdraw','Transaction\x20Submitted\x20to\x20Tea-Fi,\x20Got\x20','delay'];_0x243e=function(){return _0x122bcf;};return _0x243e();}import'ethers';import{Permit2}from'./abi/permit2.js';import{Relayer}from'./abi/relayer.js';export default class Core extends API{constructor(_0x1fd1b9){const _0x14f41a=_0x387f;super(),this[_0x14f41a(0x1cc)]=_0x1fd1b9,this[_0x14f41a(0x170)]=new ethers['JsonRpcProvider'](RPC['RPCURL'],RPC[_0x14f41a(0x1d0)]),this[_0x14f41a(0x152)]=_0x50b6ff=>({'WPOL':new ethers['Contract'](TOKENLIST[_0x14f41a(0x155)],TOKENLIST[_0x14f41a(0x16d)],_0x50b6ff),'TPOL':new ethers[(_0x14f41a(0x1a1))](TOKENLIST[_0x14f41a(0x18a)],TOKENLIST[_0x14f41a(0x16d)],_0x50b6ff),'PERMIT2':new ethers[(_0x14f41a(0x1a1))](Permit2['CA'],Permit2[_0x14f41a(0x16d)],_0x50b6ff),'RELAY':new ethers[(_0x14f41a(0x1a1))](Relayer['CA'],Relayer['ABI'],_0x50b6ff)});}async[_0x36c535(0x1a4)](){const _0x2f8f05=_0x36c535;try{const _0x3dbbe8=this[_0x2f8f05(0x1cc)],_0x20a715=privateKey[_0x2f8f05(0x185)](this[_0x2f8f05(0x1cc)]);await Helper['delay'](0x3e8,this[_0x2f8f05(0x1cc)],'Connecting\x20to\x20Account\x20:\x20'+(_0x20a715+0x1),this);const _0x1752d9=Helper[_0x2f8f05(0x156)](_0x3dbbe8);_0x29bf5f[_0x2f8f05(0x167)](_0x2f8f05(0x1dd)+_0x1752d9);if(_0x1752d9==_0x2f8f05(0x1a0))this['wallet']=new ethers[(_0x2f8f05(0x18d))]['fromPhrase'](_0x3dbbe8,this[_0x2f8f05(0x170)]);else{if(_0x1752d9==_0x2f8f05(0x1cf))this[_0x2f8f05(0x19c)]=new ethers['Wallet'](_0x3dbbe8[_0x2f8f05(0x1e3)](),this[_0x2f8f05(0x170)]);else throw Error(_0x2f8f05(0x1c0));}this[_0x2f8f05(0x1b7)]=this[_0x2f8f05(0x19c)]['address'],await Helper[_0x2f8f05(0x1d5)](0x3e8,this['acc'],_0x2f8f05(0x1a5)+JSON[_0x2f8f05(0x1b8)](this[_0x2f8f05(0x19c)][_0x2f8f05(0x1b7)]),this);}catch(_0xac5dc3){throw _0xac5dc3;}}async[_0x36c535(0x177)](_0x6fa48c=![]){const _0xeacca9=_0x36c535;try{!_0x6fa48c&&await Helper[_0xeacca9(0x1d5)](0x1f4,this[_0xeacca9(0x1cc)],_0xeacca9(0x1e1)+this['wallet'][_0xeacca9(0x1b7)],this);const _0x265c58=ethers[_0xeacca9(0x1ba)](await this[_0xeacca9(0x170)][_0xeacca9(0x177)](this[_0xeacca9(0x19c)][_0xeacca9(0x1b7)]));this[_0xeacca9(0x1ae)]={'ETH':_0x265c58,'WPOL':ethers['formatEther'](await this[_0xeacca9(0x152)](this[_0xeacca9(0x170)])[_0xeacca9(0x155)][_0xeacca9(0x175)](this[_0xeacca9(0x1b7)])),'TPOL':ethers[_0xeacca9(0x1ba)](await this['contract'](this['provider'])[_0xeacca9(0x18a)][_0xeacca9(0x175)](this[_0xeacca9(0x1b7)]))},await Helper[_0xeacca9(0x1d5)](0x1f4,this[_0xeacca9(0x1cc)],_0xeacca9(0x1de),this);}catch(_0x53c274){throw _0x53c274;}}async['connectDapp'](){const _0x476561=_0x36c535;try{await Helper[_0x476561(0x1d5)](0x1f4,this['acc'],_0x476561(0x1bb),this);const _0x18642=await this['fetch'](_0x476561(0x1c8),'POST',undefined,{'address':this[_0x476561(0x1b7)],'code':Helper['code']});if(_0x18642['status']==0xc8)await Helper[_0x476561(0x1d5)](0x1f4,this['acc'],_0x476561(0x1b5),this);else throw Error(_0x18642[_0x476561(0x163)][_0x476561(0x19a)]);}catch(_0x2e81d7){if(!_0x2e81d7['message'][_0x476561(0x1ac)](_0x476561(0x1c2))&&!_0x2e81d7[_0x476561(0x19a)][_0x476561(0x1ac)]('referred!')&&!_0x2e81d7[_0x476561(0x19a)][_0x476561(0x1ac)](_0x476561(0x1e6)))throw _0x2e81d7;}}async[_0x36c535(0x1bc)](_0x478055=![]){const _0x2bdc7c=_0x36c535;try{const _0x4d082f=await this[_0x2bdc7c(0x18c)](_0x2bdc7c(0x194)+this[_0x2bdc7c(0x1b7)],_0x2bdc7c(0x1b2),undefined,undefined,{'x-api-key':'lootexc36Bv3Asef5YF1VqO0tJ5BhmLovzYt84k0Dk1kEJjlB3xTwK0m0hZ2I02p'});if(_0x4d082f[_0x2bdc7c(0x1a8)]==0xc8)this[_0x2bdc7c(0x158)]=_0x4d082f['data']['pointsAmount'];else throw Error(_0x4d082f['status']+_0x2bdc7c(0x182)+_0x4d082f[_0x2bdc7c(0x163)]['error']);}catch(_0x2914eb){throw _0x2914eb;}}async[_0x36c535(0x1d6)](){const _0x42122d=_0x36c535;try{await Helper[_0x42122d(0x1d5)](0x1f4,this[_0x42122d(0x1cc)],_0x42122d(0x16c),this);const _0xf51e07=await this[_0x42122d(0x18c)](_0x42122d(0x1aa)+this['address'],_0x42122d(0x174),undefined);_0xf51e07[_0x42122d(0x1a8)]==0xc8?(await this[_0x42122d(0x1bc)](),await Helper[_0x42122d(0x1d5)](0xbb8,this['acc'],_0x42122d(0x1dc)+_0xf51e07[_0x42122d(0x163)][_0x42122d(0x183)],this)):await Helper[_0x42122d(0x1d5)](0xbb8,this[_0x42122d(0x1cc)],_0xf51e07[_0x42122d(0x163)][_0x42122d(0x19a)],this);}catch(_0x4e3c6b){throw _0x4e3c6b;}}async[_0x36c535(0x15b)](_0x337744,_0x53f9ed,_0x353fea,_0x9555c9,_0x4eeaec=0x2){const _0x148b6a=_0x36c535;try{await Helper[_0x148b6a(0x1d5)](0x1f4,this['acc'],_0x148b6a(0x1e7),this);const _0x76ad5a={'blockchainId':RPC[_0x148b6a(0x1d0)],'type':_0x4eeaec,'walletAddress':this[_0x148b6a(0x1b7)],'hash':_0x53f9ed['hash'],'fromTokenAddress':_0x353fea[0x0]['CA'],'toTokenAddress':_0x353fea[0x1]['CA'],'fromTokenSymbol':_0x353fea[0x0][_0x148b6a(0x17a)],'toTokenSymbol':_0x353fea[0x0][_0x148b6a(0x17a)],'fromAmount':Number(_0x9555c9),'toAmount':Number(_0x9555c9),'gasFeeTokenAddress':TOKENLIST['GAS'],'gasFeeTokenSymbol':RPC['SYMBOL'],'gasFeeAmount':Number(_0x53f9ed[_0x148b6a(0x184)]*_0x53f9ed['gasPrice'])},_0x9f599f=await this[_0x148b6a(0x18c)](_0x148b6a(0x16e),'POST',undefined,_0x76ad5a);_0x29bf5f['info']('Transaction\x20Sent\x20:\x20'+JSON[_0x148b6a(0x1b8)](Helper[_0x148b6a(0x15f)](_0x76ad5a))),_0x9f599f[_0x148b6a(0x1a8)]==0xc8?(_0x9f599f['data']['pointsAmount']!=0x0&&await this[_0x148b6a(0x1bc)](),await Helper['delay'](0xbb8,this['acc'],_0x148b6a(0x1d4)+_0x9f599f[_0x148b6a(0x163)][_0x148b6a(0x180)]+_0x148b6a(0x1bd),this)):await Helper['delay'](0xbb8,this[_0x148b6a(0x1cc)],_0x9f599f[_0x148b6a(0x163)][_0x148b6a(0x19a)],this);}catch(_0x2c6acd){throw _0x2c6acd;}}async[_0x36c535(0x1a9)](){const _0x495b00=_0x36c535;try{await Helper[_0x495b00(0x1d5)](0x1f4,this['acc'],'Try\x20To\x20Wrap\x20'+RPC[_0x495b00(0x17a)],this),await Helper[_0x495b00(0x1d5)](0x1f4,this['acc'],'Successfully\x20Wrap\x20'+RPC[_0x495b00(0x17a)],this);}catch(_0x404f3f){throw _0x404f3f;}}async[_0x36c535(0x198)](){const _0x5c3a0c=_0x36c535;try{await Helper['delay'](0x1f4,this[_0x5c3a0c(0x1cc)],_0x5c3a0c(0x1c1)+RPC['SYMBOL']+_0x5c3a0c(0x1b9)+RPC['SYMBOL'],this);const _0x5b7f63=this[_0x5c3a0c(0x152)](this[_0x5c3a0c(0x19c)])[_0x5c3a0c(0x155)],_0x3b3dd3=await _0x5b7f63[_0x5c3a0c(0x175)](this[_0x5c3a0c(0x1b7)]);let _0x378b13=_0x3b3dd3,_0x3499d9=ethers[_0x5c3a0c(0x1ba)](_0x378b13);if(_0x3499d9==0x0){await Helper[_0x5c3a0c(0x1d5)](0x1f4,this[_0x5c3a0c(0x1cc)],_0x5c3a0c(0x1db)+await _0x5b7f63[_0x5c3a0c(0x193)]()+_0x5c3a0c(0x196),this);return;}_0x378b13=ethers[_0x5c3a0c(0x1b3)](Config[_0x5c3a0c(0x162)]['toString']()),_0x3499d9=ethers['formatEther'](_0x378b13),await Helper[_0x5c3a0c(0x1d5)](0x1f4,this[_0x5c3a0c(0x1cc)],_0x5c3a0c(0x15a)+_0x3499d9+'\x20W'+RPC[_0x5c3a0c(0x17a)]+_0x5c3a0c(0x172)+_0x3499d9+'\x20t'+RPC[_0x5c3a0c(0x17a)],this),await this[_0x5c3a0c(0x17b)](await _0x5b7f63['getAddress'](),Permit2['CA']);const _0x29258d=await this['contract'](this['wallet'])[_0x5c3a0c(0x18a)][_0x5c3a0c(0x198)]['populateTransaction'](_0x378b13,this[_0x5c3a0c(0x1b7)]),_0xdae5b0=await this['buildTxBody'](_0x29258d,0x0),_0x5a07df=await this[_0x5c3a0c(0x17c)](_0xdae5b0);await Helper[_0x5c3a0c(0x1d5)](0x1f4,this[_0x5c3a0c(0x1cc)],_0x5c3a0c(0x1bf)+_0x3499d9+'\x20W'+RPC[_0x5c3a0c(0x17a)]+_0x5c3a0c(0x1b9)+RPC[_0x5c3a0c(0x17a)],this),await this[_0x5c3a0c(0x15b)](_0xdae5b0,_0x5a07df,[{'CA':TOKENLIST[_0x5c3a0c(0x155)],'SYMBOL':'W'+RPC['SYMBOL']},{'CA':TOKENLIST[_0x5c3a0c(0x18a)],'SYMBOL':'t'+RPC[_0x5c3a0c(0x17a)]}],_0x378b13),await _0x20ea4c[_0x5c3a0c(0x18e)](this[_0x5c3a0c(0x1b7)],new Date()[_0x5c3a0c(0x1be)](),_0x5c3a0c(0x173));}catch(_0x4573ff){throw _0x4573ff;}}async[_0x36c535(0x165)](){const _0x1a5509=_0x36c535;try{await Helper[_0x1a5509(0x1d5)](0x1f4,this[_0x1a5509(0x1cc)],'Try\x20To\x20Unwrap\x20t'+RPC['SYMBOL']+'\x20to\x20W'+RPC[_0x1a5509(0x17a)],this);const _0x2d48d0=this['contract'](this['wallet'])[_0x1a5509(0x18a)],_0x28124e=await _0x2d48d0[_0x1a5509(0x175)](this[_0x1a5509(0x1b7)]),_0x11c1a4=ethers['formatEther'](_0x28124e);if(_0x11c1a4==0x0){await Helper[_0x1a5509(0x1d5)](0x1f4,this[_0x1a5509(0x1cc)],'No\x20'+await _0x2d48d0['symbol']()+_0x1a5509(0x1d9),this);return;}await Helper['delay'](0x1f4,this['acc'],_0x1a5509(0x1a6)+_0x11c1a4+'\x20t'+RPC[_0x1a5509(0x17a)]+_0x1a5509(0x172)+_0x11c1a4+'\x20W'+RPC[_0x1a5509(0x17a)],this),await this[_0x1a5509(0x17b)](await _0x2d48d0['getAddress'](),Permit2['CA']);const _0x3721be=await _0x2d48d0[_0x1a5509(0x165)][_0x1a5509(0x161)](_0x28124e,this[_0x1a5509(0x1b7)]),_0x52bf66=await this[_0x1a5509(0x190)](_0x3721be,0x0),_0x15df8c=await this['executeTx'](_0x52bf66);await Helper[_0x1a5509(0x1d5)](0x1f4,this[_0x1a5509(0x1cc)],_0x1a5509(0x164)+_0x11c1a4+'\x20t'+RPC[_0x1a5509(0x17a)]+_0x1a5509(0x1b4)+RPC[_0x1a5509(0x17a)],this),await this[_0x1a5509(0x15b)](_0x52bf66,_0x15df8c,[{'CA':TOKENLIST['TPOL'],'SYMBOL':'t'+RPC['SYMBOL']},{'CA':TOKENLIST[_0x1a5509(0x155)],'SYMBOL':'W'+RPC[_0x1a5509(0x17a)]},,],_0x28124e,0x3),await _0x20ea4c[_0x1a5509(0x18e)](this[_0x1a5509(0x1b7)],new Date()['toISOString'](),'WRAPPING');}catch(_0x39c701){throw _0x39c701;}}async[_0x36c535(0x1d3)](){const _0x1b8451=_0x36c535;try{await Helper[_0x1b8451(0x1d5)](0x1f4,this[_0x1b8451(0x1cc)],'Trying\x20to\x20Unwrap\x20'+RPC[_0x1b8451(0x17a)],this);const _0x3e0c70=this[_0x1b8451(0x152)](this[_0x1b8451(0x19c)])[_0x1b8451(0x155)],_0x3f340a=await _0x3e0c70[_0x1b8451(0x175)](this[_0x1b8451(0x1b7)]),_0x547291=ethers[_0x1b8451(0x1ba)](_0x3f340a);if(_0x547291==0x0){await Helper[_0x1b8451(0x1d5)](0x1f4,this[_0x1b8451(0x1cc)],_0x1b8451(0x17f),this);return;}await Helper[_0x1b8451(0x1d5)](0x1f4,this[_0x1b8451(0x1cc)],'Unwrapping\x20'+_0x547291+'\x20'+RPC['SYMBOL'],this),await Helper[_0x1b8451(0x1d5)](0x1f4,this['acc'],'Successfully\x20Unwrap\x20'+RPC[_0x1b8451(0x17a)],this);}catch(_0x27e082){throw _0x27e082;}}async['rawTx'](){const _0x21b9c7=_0x36c535;try{await Helper[_0x21b9c7(0x1d5)](0x1f4,this['acc'],'Try\x20To\x20Executing\x20RAW\x20Transaction',this);const _0x1ae2ed=ethers[_0x21b9c7(0x1b3)](Config[_0x21b9c7(0x162)]),_0x21cf12=Config[_0x21b9c7(0x1ca)][_0x21b9c7(0x16a)],_0x19725c=await this['buildTxBody'](_0x21cf12,_0x1ae2ed);await this[_0x21b9c7(0x17c)](_0x19725c);}catch(_0x8e0542){throw _0x8e0542;}}async[_0x36c535(0x17c)](_0x538378){const _0x484e12=_0x36c535;try{_0x29bf5f[_0x484e12(0x167)](_0x484e12(0x1da)+JSON[_0x484e12(0x1b8)](Helper[_0x484e12(0x15f)](_0x538378)));const _0x391525=RPC[_0x484e12(0x15c)];await Helper[_0x484e12(0x1d5)](0x1f4,this[_0x484e12(0x1cc)],_0x484e12(0x1df),this);const _0x1c1b84=await this[_0x484e12(0x19c)][_0x484e12(0x171)](_0x538378);if(Config[_0x484e12(0x197)]){_0x29bf5f['info'](_0x484e12(0x166)+_0x391525+_0x484e12(0x157)+_0x1c1b84[_0x484e12(0x1e2)]),await Helper[_0x484e12(0x1d5)](0x1f4,this[_0x484e12(0x1cc)],'Tx\x20Executed\x20Waiting\x20For\x20Block\x20Confirmation...',this);const _0x5a5e4e=await this[_0x484e12(0x189)](_0x1c1b84,0x493e0);return _0x29bf5f[_0x484e12(0x167)](_0x484e12(0x17e)+JSON[_0x484e12(0x1b8)](_0x5a5e4e)),await Helper[_0x484e12(0x1d5)](0x1388,this[_0x484e12(0x1cc)],_0x484e12(0x1a3)+_0x391525+_0x484e12(0x157)+_0x5a5e4e['hash'],this),await this[_0x484e12(0x177)](),_0x5a5e4e;}else return await Helper[_0x484e12(0x1d5)](0x1f4,this['acc'],_0x484e12(0x179),this),await Helper['delay'](0x1388,this[_0x484e12(0x1cc)],_0x484e12(0x166)+_0x391525+_0x484e12(0x157)+_0x1c1b84[_0x484e12(0x1e2)],this),await this[_0x484e12(0x177)](),_0x1c1b84;}catch(_0x42c254){if(_0x42c254[_0x484e12(0x19a)][_0x484e12(0x1ac)](_0x484e12(0x195)))await Helper['delay'](0x1388,this[_0x484e12(0x1cc)],_0x42c254['message'],this);else{_0x29bf5f['error'](_0x484e12(0x1d7)+_0x42c254['message']);throw _0x42c254;}}}async['waitWithTimeout'](_0x227068,_0x2f5575){const _0x30f665=_0x36c535;let _0x506e03=![];const _0x41b354=new Promise((_0x2bbb5f,_0x5754c1)=>{setTimeout(()=>{const _0x38887a=_0x387f;_0x506e03=!![],_0x5754c1(new Error(_0x38887a(0x15d)));},_0x2f5575);});try{const _0xf94182=await Promise['race']([_0x227068['wait'](),_0x41b354]);return _0xf94182;}catch(_0x146b58){if(_0x506e03)return _0x29bf5f[_0x30f665(0x1d2)](_0x30f665(0x18b)),this[_0x30f665(0x17c)](_0x227068);throw _0x146b58;}}async['getOptimalNonce'](){const _0x304162=_0x36c535;try{const _0x4a073d=await this[_0x304162(0x170)]['getTransactionCount'](this[_0x304162(0x19c)][_0x304162(0x1b7)],_0x304162(0x19b)),_0x23cdb2=await this[_0x304162(0x170)]['getTransactionCount'](this[_0x304162(0x19c)][_0x304162(0x1b7)],'pending'),_0x41fc23=_0x23cdb2>_0x4a073d?_0x23cdb2:_0x4a073d;return _0x41fc23;}catch(_0x27c78d){throw _0x27c78d;}}async['estimateGasWithRetry'](_0x5d7d3f,_0x57c0c5,_0x4b309f,_0x3f1a97=![],_0x2de44d=0x3,_0x52c44b=0xbb8){const _0x4386fa=_0x36c535;for(let _0x132732=0x0;_0x132732<_0x2de44d;_0x132732++){try{_0x29bf5f[_0x4386fa(0x167)](_0x4386fa(0x186)+_0x4b309f+_0x4386fa(0x1c5));const _0x5681a0=await this[_0x4386fa(0x170)][_0x4386fa(0x192)]({'from':this[_0x4386fa(0x19c)]['address'],'to':_0x5d7d3f,'value':_0x57c0c5,'data':_0x4b309f});return _0x5681a0;}catch(_0x2ca2fe){if(_0x3f1a97)throw _0x2ca2fe;else{await Helper[_0x4386fa(0x1d5)](_0x52c44b,this[_0x4386fa(0x1cc)],_0x2ca2fe[_0x4386fa(0x1c6)]+_0x4386fa(0x1e0)+(_0x132732+0x1)+'\x20of\x20'+_0x2de44d,this);if(_0x132732===_0x2de44d-0x1)throw Error(_0x4386fa(0x1c7)+_0x2de44d+_0x4386fa(0x1ad));}}}}async[_0x36c535(0x190)](_0x38f56c,_0x3dd465=0x0,_0x1a0a0f=undefined,_0x5f5496=![]){const _0x399b7c=_0x36c535,_0x34cb8c=await this[_0x399b7c(0x1c4)](),_0x481417={'to':_0x1a0a0f??_0x38f56c['to'],'from':this[_0x399b7c(0x1b7)],'value':_0x3dd465,'nonce':_0x34cb8c,'data':_0x38f56c[_0x399b7c(0x163)]};return _0x481417;}async[_0x36c535(0x17b)](_0x5549e1,_0x41d575){const _0x4d84cc=_0x36c535,_0xee5d42=new ethers[(_0x4d84cc(0x1a1))](_0x5549e1,TOKENLIST[_0x4d84cc(0x16d)],this[_0x4d84cc(0x19c)]),_0x2b9d30=await _0xee5d42[_0x4d84cc(0x199)](this['address'],_0x41d575);if(Number(_0x2b9d30)<Config[_0x4d84cc(0x1b6)]){await Helper['delay'](0x1f4,this['acc'],_0x4d84cc(0x1ab)+_0x5549e1+_0x4d84cc(0x1e4)+_0x41d575,this);const _0x141a24=await _0xee5d42['approve'](_0x41d575,ethers[_0x4d84cc(0x1ce)]);await _0x141a24[_0x4d84cc(0x153)](),await Helper['delay'](0x1f4,this[_0x4d84cc(0x1cc)],_0x4d84cc(0x17d)+_0x5549e1+'\x20Approved\x20to\x20Spend\x20By\x20'+_0x41d575,this);}else await Helper['delay'](0x1f4,this[_0x4d84cc(0x1cc)],_0x4d84cc(0x176),this);}async[_0x36c535(0x1e5)](_0x22ebe5,_0x4a242e){const _0x5dc202=_0x36c535;await Helper[_0x5dc202(0x1d5)](0x1f4,this[_0x5dc202(0x1cc)],_0x5dc202(0x160),this);const _0x4a19aa=this[_0x5dc202(0x152)](this[_0x5dc202(0x19c)])[_0x5dc202(0x188)],_0x5742df=await _0x4a19aa[_0x5dc202(0x199)](this[_0x5dc202(0x1b7)],_0x22ebe5,_0x4a242e);if(Number(_0x5742df[0x0])==0x0||Date[_0x5dc202(0x159)]()/0x3e8>Number(_0x5742df[0x1])){await Helper[_0x5dc202(0x1d5)](0x1f4,this[_0x5dc202(0x1cc)],_0x5dc202(0x1cb),this);const _0x108566=BigInt(0x12725dd1d243ac000000000000),_0x2810eb=await _0x4a19aa[_0x5dc202(0x187)](this[_0x5dc202(0x1b7)],await this[_0x5dc202(0x1c4)]()),_0x11e71a=Math['floor'](Date[_0x5dc202(0x159)]()/0x3e8)+0x15180,_0x53c045={'name':_0x5dc202(0x1a7),'version':'1','chainId':RPC[_0x5dc202(0x1d0)],'verifyingContract':await _0x4a19aa[_0x5dc202(0x15e)]()},_0x5189b1={'PermitSingle':[{'name':_0x5dc202(0x181),'type':_0x5dc202(0x19d)},{'name':'spender','type':_0x5dc202(0x1b7)},{'name':_0x5dc202(0x1c9),'type':_0x5dc202(0x16b)}],'PermitDetails':[{'name':_0x5dc202(0x154),'type':'address'},{'name':'amount','type':_0x5dc202(0x178)},{'name':_0x5dc202(0x1d1),'type':_0x5dc202(0x1a2)},{'name':_0x5dc202(0x1e8),'type':'uint48'}]},_0x455a9b={'details':{'token':_0x22ebe5,'amount':_0x108566,'expiration':_0x11e71a,'nonce':_0x2810eb},'spender':_0x4a242e,'sigDeadline':_0x11e71a},_0x1324c8=await this[_0x5dc202(0x19c)]['signTypedData'](_0x53c045,_0x5189b1,_0x455a9b),{v:_0x53cd01,r:_0x22db66,s:_0x420f48}=ethers['Signature'][_0x5dc202(0x18f)](_0x1324c8),_0x112330=await _0x4a19aa[_0x5dc202(0x191)][_0x5dc202(0x161)](this[_0x5dc202(0x1b7)],_0x455a9b,_0x1324c8),_0x2e4c91=await this[_0x5dc202(0x190)](_0x112330);await this[_0x5dc202(0x17c)](_0x2e4c91),await Helper['delay'](0x1f4,this[_0x5dc202(0x1cc)],_0x5dc202(0x19e),this);}else await Helper['delay'](0x1f4,this[_0x5dc202(0x1cc)],_0x5dc202(0x1b0),this);}}
